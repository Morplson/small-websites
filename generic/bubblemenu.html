<!DOCTYPE html>
<html>
<head>
	<title>bubblemenu</title>
</head>

<link rel="stylesheet" type="text/css" href="main.css">
<link rel="stylesheet" type="text/css" href="bubblemenu.css">

<body>



	<aside class="bubblemenu">
		
		<div data-target="one" class="menucapsule">
			<div class="menutext">
				"Tag text"
			</div>
			<div class="menuicon">
				1
			</div>
		</div>
		<div data-target="two" class="menucapsule">
			<div class="menutext">
				"Tag text"
			</div>
			<div class="menuicon">
				2
			</div>
		</div>
		<div data-target="three" class="menucapsule">
			<div class="menutext">
				"Tag text"
			</div>
			<div class="menuicon">
				3
			</div>
		</div>
		<div data-target="four" class="menucapsule">
			<div class="menutext">
				"Tag text"
			</div>
			<div class="menuicon">
				4
			</div>
		</div>
		<div data-target="five" class="menucapsule">
			<div class="menutext">
				"Tag text"
			</div>
			<div class="menuicon">
				5
			</div>
		</div>
	</aside>




	<main>
		
		<div class="box " id="one">
			<div class="inside">
				<h1>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</h1>
				<h2>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</h2>
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. 
				</p>
			</div>
		</div>


		<div class="box b2 s2" id="two">
			<div class="inside">
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. 
				</p>
				<picture>
					<img src="https://picsum.photos/400/300/">
				</picture>
				
			</div>
		</div>

		<div class="box b2 s2">
			<div class="inside">
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. 
				</p>
			
				<picture class="effect">
					<img src="https://picsum.photos/400/200/">
				</picture>
			</div>
			
		</div>


		<div class="box b3 s3" id="three">
			<div class="inside">
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. 
				</p>
			</div> 
		</div>

		<div class="box b3 s3 ">
			<div class="inside">
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. 
				</p>
			</div> 
		</div>

		<div class="box b3 s3">
			<div class="inside">
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. 
				</p>
			</div> 
		</div>


		<div class="box b4" id="four">
			<div class="inside">
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. 
				</p>
			</div>  
		</div>

		<div class="box b4">
			<div class="inside">
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. 
				</p>
			</div> 
		</div>

		<div class="box b4">
			<div class="inside">
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. 
				</p>
			</div> 
		</div>

		<div class="box b4">
			<div class="inside">
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. 
				</p>
			</div> 
		</div>


		<div class="box b5" id="five">
			<div class="inside">
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. 
				</p>
			</div> 
		</div>

		<div class="box b5">
			<div class="inside">
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. 
				</p>
			</div> 
		</div>

		<div class="box b5">
			<div class="inside">
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. 
				</p>
			</div> 
		</div>

		<div class="box b5">
			<div class="inside">
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. 
				</p>
			</div> 
		</div>

		<div class="box b5">
			<div class="inside">
				<p>
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. 
				</p>
			</div> 
		</div>

	</main>



<script type="text/javascript">
	window.addEventListener('load', function() {
    	initBubbleBar();
	});
		
	

	function initBubbleBar(methode) {
		if (!methode) {
			methode = "click";
		}

		document.addEventListener("scroll", activeChecker, false);
		activeChecker();

		const inserts = document.querySelectorAll('.menucapsule');
		console.info("initBubbleBar");

		for (const insert of inserts) {
			insert.addEventListener(methode, menuScroll, false);

		}
	}

	function menuScroll(event) {
		let target = event.currentTarget.dataset.target;

		document.getElementById(target).scrollIntoView();
	}





	function activeChecker() {

		const inserts = document.querySelectorAll('.menucapsule');

		for (const insert of inserts) {
			let crr = checkVisible(document.getElementById(insert.dataset.target), 200);

			if (crr) {
				insert.classList.add("active");
			}else{
				insert.classList.remove("active");
			}
		}

		

	};


	function checkVisible(elm, threshold, mode) {
		threshold = threshold || 0;
		mode = mode || 'visible';

		var rect = elm.getBoundingClientRect();
		var viewHeight = Math.max(document.documentElement.clientHeight, window.innerHeight);
		var above = rect.bottom - threshold < 0;
		var below = rect.top - viewHeight + threshold >= 0;

		return mode === 'above' ? above : (mode === 'below' ? below : !above && !below);
	}

</script>



</body>
</html>






































